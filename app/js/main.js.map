{"version":3,"sources":["main.js"],"names":["disableScroll","pagePosition","window","scrollY","document","querySelector","style","scrollBehavior","body","classList","add","dataset","position","top","enableScroll","parseInt","remove","scroll","left","removeAttribute","scrollLock_BtnListener","item","addEventListener","e","toggle","contains","modalButtons","querySelectorAll","lockPadding","modalCloseButtons","timeout","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","length","console","log","index","modalCurrentButton","modalName","path","curentModal","getElementById","modalOpen","setTimeout","forEach","el","focus","preventDefault","modalClose","closest","activeElement","modalActive","bodyLock","target","doUnlock","bodyUnlock","lockPaddingValue","innerWidth","offsetWidth","paddingRight","isiPhone","isiPad","isiPod","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","navigator","userAgent","match","linkNav","i","w","pageYOffset","hash","href","replace","t","getBoundingClientRect","start","requestAnimationFrame","step","time","progress","r","Math","max","min","scrollTo","location","smoothScroll","instruction","heroVideoWrapp","heroVideo","videoBtn","videoOverlay","videoBtns","videoSpeed","videoPlay","play","setAttribute","videoPaused","addClassVideoSpeed","playbackRate","textContent","removeEventListener"],"mappings":"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","file":"main.js","sourcesContent":["// Includes\n// // scrollLockIOS\r\n// Выключение скролла\r\nlet disableScroll = () => {\r\n\tlet pagePosition = window.scrollY;\r\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\r\n\tdocument.body.classList.add('ios-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n}\r\n\r\n// Включение скролла\r\nlet enableScroll = () => {\r\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\r\n\tdocument.body.style.top = 'auto';\r\n\tdocument.body.classList.remove('ios-lock');\r\n\twindow.scroll({ top: pagePosition, left: 0 });\r\n\tdocument.querySelector('html').removeAttribute('style');\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\n\r\n// Слушательна один элемент\r\nlet scrollLock_BtnListener = (item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\titem.classList.toggle('scroll')\r\n\t\tif (item.classList.contains('scroll')) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tenableScroll();\r\n\t\t}\r\n\t});\r\n};\n\n// const body = document.querySelector('body')\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (lockPadding.length == 0) {\r\n\tconsole.log('@MODALS: \"Не забудьте добавить класс \"fixed-padding\" фиксированным элементам!\"')\r\n}\r\nif (typeof (disableScroll) == 'function' && typeof (enableScroll)) {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)}\"! @scrollLockIOS: ON`);\r\n} else {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tconsole.log(`Открыто модальное окно: ${modalName}`);\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Такого модального окна нету! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (typeof (disableScroll) === \"function\") {\r\n\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tdisableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.add('lock');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (typeof (enableScroll) === \"function\") {\r\n\t\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\t\tenableScroll();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\n// -- //\n\nconst isiPhone = (navigator.userAgent.match(/iPhone/i) != null);\nconst isiPad = (navigator.userAgent.match(/iPad/i) != null);\nconst isiPod = (navigator.userAgent.match(/iPod/i) != null);\nif (isiPhone || isiPad || isiPod) {\n\t// Smooth scroll to link\n\tlet smoothScroll = () => {\n\t\tlet linkNav = document.querySelectorAll('[href^=\"#\"]'),\n\t\t\tV = 0.2;\n\t\tfor (let i = 0; i < linkNav.length; i++) {\n\t\t\tlinkNav[i].addEventListener('click', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet w = window.pageYOffset,\n\t\t\t\t\thash = this.href.replace(/[^#]*(.*)/, '$1');\n\t\t\t\tt = document.querySelector(hash).getBoundingClientRect().top,\n\t\t\t\t\tstart = null;\n\t\t\t\trequestAnimationFrame(step);\n\t\t\t\tfunction step(time) {\n\t\t\t\t\tif (start === null) start = time;\n\t\t\t\t\tlet progress = time - start,\n\t\t\t\t\t\tr = (t < 0 ? Math.max(w - progress / V, w + t) : Math.min(w + progress / V, w + t));\n\t\t\t\t\twindow.scrollTo(0, r);\n\t\t\t\t\tif (r != w + t) {\n\t\t\t\t\t\trequestAnimationFrame(step)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocation.hash = hash\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\t}\n\tsmoothScroll();\n\t// -- //\n}\n\n// Video \nconst instruction = document.querySelector('.instruction');\nconst heroVideoWrapp = document.querySelector('.hero-video');\nconst heroVideo = document.querySelector('.hero-video__video');\nconst videoBtn = document.querySelector('.hero-video__button');\nconst videoOverlay = document.querySelector('.hero-video__media');\nconst videoBtns = document.querySelector('.instruction__watch');\nconst videoSpeed = document.querySelector('.hero-video__btn-speed');\n\nconst videoPlay = () => {\n\theroVideo.play();\n\n\theroVideo.setAttribute('controls', 'controls');\n\tvideoBtn.classList.add('hero-video__button--hidden');\n\tvideoOverlay.classList.add('hero-video__media--hidden');\n}\nconst videoPaused = () => {\n\theroVideo.removeAttribute('controls');\n\tvideoSpeed.classList.remove('hero-video__btn-speed--visible')\n\tvideoBtn.classList.remove('hero-video__button--hidden');\n\tvideoOverlay.classList.remove('hero-video__media--hidden');\n}\nconst addClassVideoSpeed = () => {\n\tvideoSpeed.classList.add('hero-video__btn-speed--visible');\n}\ninstruction.addEventListener('click', (e) => {\n\tif (e.target === videoBtn || e.target === videoBtns) {\n\t\tvideoPlay();\n\t} else if (e.target === videoSpeed) {\n\t\tif (heroVideo.playbackRate === 1) {\n\t\t\theroVideo.playbackRate = 2;\n\t\t\tvideoSpeed.textContent = 'x1';\n\t\t} else {\n\t\t\theroVideo.playbackRate = 1;\n\t\t\tvideoSpeed.textContent = 'x2';\n\t\t}\n\t}\n})\n\nheroVideo.addEventListener('play', () => {\n\theroVideoWrapp.addEventListener('mouseover', addClassVideoSpeed)\n\theroVideoWrapp.addEventListener('mouseleave', () => {\n\t\tvideoSpeed.classList.remove('hero-video__btn-speed--visible');\n\t})\n})\nheroVideo.addEventListener('pause', () => {\n\tvideoPaused();\n\theroVideoWrapp.removeEventListener('mouseover', addClassVideoSpeed);\n})\nheroVideo.addEventListener('ended', () => {\n\tvideoPaused();\n})\n// -- //"]}